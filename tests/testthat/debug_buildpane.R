#TODO write `print(Sys.getenv())` in a test and run it in the console (old) and in the build pane (new)

old = "USERSPROFILE         C:/ProgramData
APPDATA                      E:/WINDOWS/AppData/Roaming
CLICOLOR_FORCE               1
CommonProgramFiles           C:/Program Files/Common Files
CommonProgramFiles(x86)      C:/Program Files (x86)/Common Files
CommonProgramW6432           C:/Program Files/Common Files
COMPUTERNAME                 DESKTOP-WIN10
ComSpec                      C:/WINDOWS/system32/cmd.exe
DISPLAY                      :0
docear_bibtex_current        C:/Users/Dan/Docear/projects/My Thesis/_data/166924C3E0BE7YBY6Y7K9OHXPUWUDE517V9N/default_files/My Thesis.bib
DriverData                   C:/Windows/System32/Drivers/DriverData
GFORTRAN_STDERR_UNIT         -1
GFORTRAN_STDOUT_UNIT         -1
GOOGLE_API_KEY               no
GOOGLE_DEFAULT_CLIENT_ID     no
GOOGLE_DEFAULT_CLIENT_SECRET no
HOME                         E:/WINDOWS/MesDocuments
HOMEDRIVE                    C:
HOMEPATH                     /Users/Dan
JAVA_HOME                    C:/Program Files/Java/jdk-18.0.2
LANGUAGE                     en
LOCALAPPDATA                 C:/Users/Dan/AppData/Local
LOGONSERVER                  //DESKTOP-WIN10
MEmu_Path                    D:/Program Files/Microvirt
MEmuHyperv_Path              D:/Program Files/Microvirt/MEmuHyperv
MPLENGINE                    tkAgg
MSYS2_ENV_CONV_EXCL          R_ARCH
NUMBER_OF_PROCESSORS         6
OneDrive                     C:/Users/Dan/OneDrive
OneDriveConsumer             C:/Users/Dan/OneDrive
OS                           Windows_NT
PATH                         C:/rtools40/usr/bin;C:/Program Files/R/R-4.1.3/bin/x64;C:/Program Files/Common
Files/Oracle/Java/javapath;C:/Program Files (x86)/Common Files/Oracle/Java/javapath;C:/ProgramData/Oracle/Java/javapath;C:/WINDOWS/system32;C:/WINDOWS;C:/WINDOWS/System32/Wbem;C:/WINDOWS/System32/WindowsPowerShell/v1.0/;C:/Program Files (x86)/QuickTime Alternative/QTSystem;C:/UwAmp/bin/php/php-7.0.3;C:/ProgramData/ComposerSetup/bin;C:/Program Files/PuTTY/;C:/Program Files (x86)/QuickTime Alternative/QTSystem/;C:/Program Files (x86)/GnuWin32/bin;C:/Program Files (x86)/PsychoPy2;C:/Program Files (x86)/PsychoPy2/DLLs;C:/WINDOWS/System32/OpenSSH/;E:/SDK/adt-bundle-windows-x86-20130219/sdk/platform-tools;C:/Program Files/Intel/WiFi/bin/;C:/Program Files/Common Files/Intel/WirelessCommon/;C:/Program Files/dotnet/;C:/Program Files/Calibre2/;C:/Program Files/Quarto/bin;E:/WINDOWS/AppData/Roaming/TinyTeX/bin/win32;C:/Program Files/gs/gs9.56.1/bin;C:/Program Files/Git/cmd;C:/Users/Dan/AppData/Local/Programs/Python/Python37-32/Scripts/;C:/Users/Dan/AppData/Local/Programs/Python/Python37-32/;C:/Users/Dan/AppData/Local/Microsoft/WindowsApps;E:/WINDOWS/AppData/Roaming/Composer/vendor/bin;C:/Users/Dan/AppData/Local/GitHubDesktop/bin;C:/Program Files/JetBrains/PyCharm Community Edition 2019.1.3/bin;;C:/Users/Dan/AppData/Local/Microsoft/WindowsApps;F:/PROGRAMMES/UTILITAIRES/qpdf-10.0.1/bin;C:/rtools40;C:/Program Files/Intel/WiFi/bin/;C:/Program Files/Common Files/Intel/WirelessCommon/;C:/Program Files/RStudio/bin/pandoc;C:/Users/Dan/AppData/Local/Programs/Microsoft VS Code/bin;C:/Program Files/gs/gs9.54.0;C:/Users/Dan/AppData/Local/Pandoc/;E:/WINDOWS/AppData/Roaming/TinyTeX/bin/win32;C:/Program Files/Quarto/bin;C:/Program Files/7-Zip/  
PATHEXT                      .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
PROCESSOR_ARCHITECTURE       AMD64
PROCESSOR_IDENTIFIER         Intel64 Family 6 Model 158 Stepping 10, GenuineIntel
PROCESSOR_LEVEL              6
PROCESSOR_REVISION           9e0a
ProgramData                  C:/ProgramData
ProgramFiles                 C:/Program Files
ProgramFiles(x86)            C:/Program Files (x86)
ProgramW6432                 C:/Program Files
PSModulePath                 C:/Program Files/WindowsPowerShell/Modules;C:/WINDOWS/system32/WindowsPowerShell/v1.0/Modules
PUBLIC                       C:/Users/Public
PyCharm Community Edition    C:/Program Files/JetBrains/PyCharm Community Edition 2019.1.3/bin;
PYTHONIOENCODING             utf-8
QT_D3DCREATE_MULTITHREADED   1
R_ARCH                       /x64
R_CLI_HAS_HYPERLINK_IDE_HELP true
R_CLI_HAS_HYPERLINK_IDE_RUN true
R_CLI_HAS_HYPERLINK_IDE_VIGNETTE true
R_COMPILED_BY                gcc 8.3.0
R_DOC_DIR                    C:/PROGRA~1/R/R-41~1.3/doc
R_HOME                       C:/PROGRA~1/R/R-41~1.3
R_LIBS_USER                  E:/WINDOWS/MesDocuments/R/win-library/4.1
R_USER                       E:/WINDOWS/MesDocuments
RMARKDOWN_MATHJAX_PATH       C:/Program Files/RStudio/resources/mathjax-27
RS_LOCAL_PEER                //./pipe/54334-rsession
RS_RPOSTBACK_PATH            C:/Program Files/RStudio/bin/rpostback
RS_SHARED_SECRET             b53b8abf-367f-403c-8739-0c27f4efbd20
RSTUDIO                      1
RSTUDIO_CLI_HYPERLINKS       true
RSTUDIO_CONSOLE_COLOR        256
RSTUDIO_CONSOLE_WIDTH        80
RSTUDIO_MSYS_SSH             C:/Program Files/RStudio/bin/msys-ssh-1000-18
RSTUDIO_PANDOC               C:/Program Files/RStudio/bin/quarto/bin/tools
RSTUDIO_PROGRAM_MODE         desktop
RSTUDIO_SESSION_PID          24428
RSTUDIO_SESSION_PORT         54334
RSTUDIO_USER_IDENTITY        Dan
RSTUDIO_WINUTILS             C:/Program Files/RStudio/bin/winutils
RTOOLS40_HOME                C:/rtools40
RTOOLS42_HOME                C:/rtools42
SESSIONNAME                  Console
SystemDrive                  C:
SystemRoot                   C:/WINDOWS
TEMP                         C:/Users/Dan/AppData/Local/Temp
TERM                         xterm-256color
TMP                          C:/Users/Dan/AppData/Local/Temp
TZ                           Europe/Paris
TZDIR                        C:/PROGRA~1/R/R-41~1.3/share/zoneinfo
USERDOMAIN                   DESKTOP-WIN10
USERDOMAIN_ROAMINGPROFILE    DESKTOP-WIN10
USERNAME                     Dan
USERPROFILE                  C:/Users/Dan
windir                       C:/WINDOWS" %>% 
  readr::read_table(col_names = c("key", "value_console")) %>% 
  arrange(key)
x1=readr::problems()

new = "USERSPROFILE         C:/ProgramData
APPDATA                 E:/WINDOWS/AppData/Roaming
CLICOLOR_FORCE          1
COMPUTERNAME            DESKTOP-WIN10
CYGWIN                  nodosfilewarning
ComSpec                 C:/WINDOWS/system32/cmd.exe
CommonProgramFiles      C:/Program Files/Common Files
CommonProgramFiles(x86) C:/Program Files (x86)/Common Files
CommonProgramW6432      C:/Program Files/Common Files
DISPLAY                 :0
DriverData              C:/Windows/System32/Drivers/DriverData
GFORTRAN_STDERR_UNIT    -1
GFORTRAN_STDOUT_UNIT    -1
GIT_ASKPASS             rpostback-askpass
GOOGLE_API_KEY          no
GOOGLE_DEFAULT_CLIENT_ID  no
GOOGLE_DEFAULT_CLIENT_SECRET  no
HOME                    E:/WINDOWS/MesDocuments
HOMEDRIVE               C:
HOMEPATH                /Users/Dan
JAVA_HOME               C:/Program Files/Java/jdk-18.0.2
LANGUAGE                en
LC_COLLATE              C
LOCALAPPDATA            C:/Users/Dan/AppData/Local
LOGONSERVER             //DESKTOP-WIN10
MEmuHyperv_Path         D:/Program Files/Microvirt/MEmuHyperv
MEmu_Path               D:/Program Files/Microvirt
MPLENGINE               tkAgg
MSYS2_ENV_CONV_EXCL     R_ARCH
NOT_CRAN                true
NUMBER_OF_PROCESSORS    6
OS                      Windows_NT
OneDrive                C:/Users/Dan/OneDrive
OneDriveConsumer        C:/Users/Dan/OneDrive
PATH                    C:/rtools40/usr/bin;C:/Program Files/R/R-4.1.3/bin/x64;C:/Program Files/Common
Files/Oracle/Java/javapath;C:/Program Files (x86)/Common Files/Oracle/Java/javapath;C:/ProgramData/Oracle/Java/javapath;C:/WINDOWS/system32;C:/WINDOWS;C:/WINDOWS/System32/Wbem;C:/WINDOWS/System32/WindowsPowerShell/v1.0/;C:/Program Files (x86)/QuickTime Alternative/QTSystem;C:/UwAmp/bin/php/php-7.0.3;C:/ProgramData/ComposerSetup/bin;C:/Program Files/PuTTY/;C:/Program Files (x86)/QuickTime Alternative/QTSystem/;C:/Program Files (x86)/GnuWin32/bin;C:/Program Files (x86)/PsychoPy2;C:/Program Files (x86)/PsychoPy2/DLLs;C:/WINDOWS/System32/OpenSSH/;E:/SDK/adt-bundle-windows-x86-20130219/sdk/platform-tools;C:/Program Files/Intel/WiFi/bin/;C:/Program Files/Common Files/Intel/WirelessCommon/;C:/Program Files/dotnet/;C:/Program Files/Calibre2/;C:/Program Files/Quarto/bin;E:/WINDOWS/AppData/Roaming/TinyTeX/bin/win32;C:/Program Files/gs/gs9.56.1/bin;C:/Program Files/Git/cmd;C:/Users/Dan/AppData/Local/Programs/Python/Python37-32/Scripts/;C:/Users/Dan/AppData/Local/Programs/Python/Python37-32/;C:/Users/Dan/AppData/Local/Microsoft/WindowsApps;E:/WINDOWS/AppData/Roaming/Composer/vendor/bin;C:/Users/Dan/AppData/Local/GitHubDesktop/bin;C:/Program Files/JetBrains/PyCharm Community Edition 2019.1.3/bin;;C:/Users/Dan/AppData/Local/Microsoft/WindowsApps;F:/PROGRAMMES/UTILITAIRES/qpdf-10.0.1/bin;C:/rtools40;C:/Program Files/Intel/WiFi/bin/;C:/Program Files/Common Files/Intel/WirelessCommon/;C:/Program Files/RStudio/bin/pandoc;C:/Users/Dan/AppData/Local/Programs/Microsoft VS Code/bin;C:/Program Files/gs/gs9.54.0;C:/Users/Dan/AppData/Local/Pandoc/;E:/WINDOWS/AppData/Roaming/TinyTeX/bin/win32;C:/Program Files/Quarto/bin;C:/Program Files/7-Zip/
PATHEXT                 .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
PROCESSOR_ARCHITECTURE  AMD64
PROCESSOR_IDENTIFIER    Intel64 Family 6 Model 158 Stepping 10, GenuineIntel
PROCESSOR_LEVEL         6
PROCESSOR_REVISION      9e0a
PSModulePath            C:/Program Files/WindowsPowerShell/Modules;C:/WINDOWS/system32/WindowsPowerShell/v1.0/Modules
PUBLIC                  C:/Users/Public
PYTHONIOENCODING        utf-8
ProgramData             C:/ProgramData
ProgramFiles            C:/Program Files
ProgramFiles(x86)       C:/Program Files (x86)
ProgramW6432            C:/Program Files
PyCharm Community Edition C:/Program Files/JetBrains/PyCharm Community Edition 2019.1.3/bin;
QT_D3DCREATE_MULTITHREADED 1
RMARKDOWN_MATHJAX_PATH C:/Program Files/RStudio/resources/mathjax-27
RSTUDIO_CHILD_PROCESS_PANE build
RSTUDIO_CLI_HYPERLINKS true
RSTUDIO_CONSOLE_COLOR   256
RSTUDIO_CONSOLE_WIDTH   80
RSTUDIO_MSYS_SSH        C:/Program Files/RStudio/bin/msys-ssh-1000-18
RSTUDIO_PANDOC          C:/Program Files/RStudio/bin/quarto/bin/tools
RSTUDIO_PROGRAM_MODE    desktop
RSTUDIO_SESSION_PID     24428
RSTUDIO_SESSION_PORT    54334
RSTUDIO_USER_IDENTITY   Dan
RSTUDIO_WINUTILS        C:/Program Files/RStudio/bin/winutils
RS_LOCAL_PEER           //./pipe/54334-rsession
RS_RPOSTBACK_PATH       C:/Program Files/RStudio/bin/rpostback
RS_SHARED_SECRET        b53b8abf-367f-403c-8739-0c27f4efbd20
RTOOLS40_HOME           C:/rtools40
RTOOLS42_HOME           C:/rtools42
R_ARCH                  /x64
R_BROWSER               false
R_CLI_HAS_HYPERLINK_IDE_HELP true
R_CLI_HAS_HYPERLINK_IDE_RUN true
R_CLI_HAS_HYPERLINK_IDE_VIGNETTE true
R_COMPILED_BY           gcc 8.3.0
R_DOC_DIR               C:/PROGRA~1/R/R-41~1.3/doc
R_HOME                  C:/PROGRA~1/R/R-41~1.3
R_LIBS                  E:/WINDOWS/MesDocuments/R/win-library/4.1;C:/Program Files/R/R-4.1.3/library
R_LIBS_USER             E:/WINDOWS/MesDocuments/R/win-library/4.1
R_PDFVIEWER             false
R_USER                  E:/WINDOWS/MesDocuments
SESSIONNAME             Console
SSH_ASKPASS             rpostback-askpass
SystemDrive             C:
SystemRoot              C:/WINDOWS
TEMP                    C:/Users/Dan/AppData/Local/Temp
TERM                    xterm-256color
TESTTHAT                true
TESTTHAT_PKG            EDCimport
TMP                     C:/Users/Dan/AppData/Local/Temp
TZ                      Europe/Paris
TZDIR                   C:/PROGRA~1/R/R-41~1.3/share/zoneinfo
USERDOMAIN              DESKTOP-WIN10
USERDOMAIN_ROAMINGPROFILE DESKTOP-WIN10
USERNAME                Dan
USERPROFILE             C:/Users/Dan
docear_bibtex_current   C:/Users/Dan/Docear/projects/My Thesis/_data/166924C3E0BE7YBY6Y7K9OHXPUWUDE517V9N/default_files/My Thesis.bib
windir                  C:/WINDOWS" %>% 
  readr::read_table(col_names = c("key", "value_buildpane")) %>% 
  arrange(key)
x2=readr::problems()

full_join(old, new, by="key") %>% 
  arrange(key) %>%
  mutate(diff=value_console!=value_buildpane) %>%
  filter(is.na(diff) | diff!=FALSE) %>% 
  View()
